!function(e,t){"function"==typeof define&&define.amd?define(["./blockly_compressed.js"],t):"object"==typeof exports?module.exports=t(require("./blockly_compressed.js")):(e.javascript=t(e.Blockly),e.Blockly.JavaScript=e.javascript.javascriptGenerator)}(this,function(e){function t(t,n){var r=0;let a="";n.STATEMENT_PREFIX&&(a+=n.injectId(n.STATEMENT_PREFIX,t));do{var o=n.valueToCode(t,"IF"+r,E.NONE)||"false";let e=n.statementToCode(t,"DO"+r);n.STATEMENT_SUFFIX&&(e=n.prefixLines(n.injectId(n.STATEMENT_SUFFIX,t),n.INDENT)+e),a+=(0<r?" else ":"")+"if ("+o+") {\n"+e+"}",r++}while(t.getInput("IF"+r));return(t.getInput("ELSE")||n.STATEMENT_SUFFIX)&&(r=n.statementToCode(t,"ELSE"),n.STATEMENT_SUFFIX&&(r=n.prefixLines(n.injectId(n.STATEMENT_SUFFIX,t),n.INDENT)+r),a+=" else {\n"+r+"}"),a+"\n"}function n(e,t){var n=e.getField("TIMES")?String(Number(e.getFieldValue("TIMES"))):t.valueToCode(e,"TIMES",E.ASSIGNMENT)||"0",r=t.statementToCode(e,"DO"),r=t.addLoopTrap(r,e),a=(e="",t.nameDB_.getDistinctName("count",N.NameType$$module$build$src$core$names.VARIABLE));let o=n;return n.match(/^\w+$/)||N.isNumber$$module$build$src$core$utils$string(n)||(e+="var "+(o=t.nameDB_.getDistinctName("repeat_end",N.NameType$$module$build$src$core$names.VARIABLE))+" = "+n+";\n"),e+("for (var "+a+" = 0; "+a+" < "+o)+"; "+a+"++) {\n"+r+"}\n"}function r(e,t){var n=e.getFieldValue("OP");let r;if("NEG"===n)return["-"+(e="-"===(e=t.valueToCode(e,"NUM",E.UNARY_NEGATION)||"0")[0]?" "+e:e),E.UNARY_NEGATION];switch(e="SIN"===n||"COS"===n||"TAN"===n?t.valueToCode(e,"NUM",E.DIVISION)||"0":t.valueToCode(e,"NUM",E.NONE)||"0",n){case"ABS":r="Math.abs("+e+")";break;case"ROOT":r="Math.sqrt("+e+")";break;case"LN":r="Math.log("+e+")";break;case"EXP":r="Math.exp("+e+")";break;case"POW10":r="Math.pow(10,"+e+")";break;case"ROUND":r="Math.round("+e+")";break;case"ROUNDUP":r="Math.ceil("+e+")";break;case"ROUNDDOWN":r="Math.floor("+e+")";break;case"SIN":r="Math.sin("+e+" / 180 * Math.PI)";break;case"COS":r="Math.cos("+e+" / 180 * Math.PI)";break;case"TAN":r="Math.tan("+e+" / 180 * Math.PI)"}if(r)return[r,E.FUNCTION_CALL];switch(n){case"LOG10":r="Math.log("+e+") / Math.log(10)";break;case"ASIN":r="Math.asin("+e+") / Math.PI * 180";break;case"ACOS":r="Math.acos("+e+") / Math.PI * 180";break;case"ATAN":r="Math.atan("+e+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+n)}return[r,E.DIVISION]}function a(e,t){var n=t.nameDB_.getName(e.getFieldValue("NAME"),N.NameType$$module$build$src$core$names.PROCEDURE),r="";t.STATEMENT_PREFIX&&(r+=t.injectId(t.STATEMENT_PREFIX,e)),t.STATEMENT_SUFFIX&&(r+=t.injectId(t.STATEMENT_SUFFIX,e)),r=r&&t.prefixLines(r,t.INDENT);let a="";t.INFINITE_LOOP_TRAP&&(a=t.prefixLines(t.injectId(t.INFINITE_LOOP_TRAP,e),t.INDENT));var o=t.statementToCode(e,"STACK");let i=t.valueToCode(e,"RETURN",E.NONE)||"",u="";o&&i&&(u=r),i=i&&t.INDENT+"return "+i+";\n";var l=[],s=e.getVars();for(let e=0;e<s.length;e++)l[e]=t.nameDB_.getName(s[e],N.NameType$$module$build$src$core$names.VARIABLE);return r="function "+n+"("+l.join(", ")+") {\n"+r+a+o+u+i+"}",r=t.scrub_(e,r),t.definitions_["%"+n]=r,null}function o(e,t){return t="window.prompt("+(e.getField("TEXT")?t.quote_(e.getFieldValue("TEXT")):t.valueToCode(e,"TEXT",E.NONE)||"''")+")",[t="NUMBER"===e.getFieldValue("TYPE")?"Number("+t+")":t,E.FUNCTION_CALL]}function i(e,t){return[t.nameDB_.getName(e.getFieldValue("VAR"),N.NameType$$module$build$src$core$names.VARIABLE),E.ATOMIC]}function u(e,t){var n=t.valueToCode(e,"VALUE",E.ASSIGNMENT)||"0";return t.nameDB_.getName(e.getFieldValue("VAR"),N.NameType$$module$build$src$core$names.VARIABLE)+" = "+n+";\n"}function l(e,t,n){return"FIRST"===t?"0":"FROM_END"===t?e+".length - 1 - "+n:"LAST"===t?e+".length - 1":n}function s(e){return L.test(e)?[e,E.ATOMIC]:["String("+e+")",E.FUNCTION_CALL]}function T(e,t,n){return"FIRST"===t?"0":"FROM_END"===t?e+".length - 1 - "+n:"LAST"===t?e+".length - 1":n}var N=e.__namespace__,E={ATOMIC:0,NEW:1.1,MEMBER:1.2,FUNCTION_CALL:2,INCREMENT:3,DECREMENT:3,BITWISE_NOT:4.1,UNARY_PLUS:4.2,UNARY_NEGATION:4.3,LOGICAL_NOT:4.4,TYPEOF:4.5,VOID:4.6,DELETE:4.7,AWAIT:4.8,EXPONENTIATION:5,MULTIPLICATION:5.1,DIVISION:5.2,MODULUS:5.3,SUBTRACTION:6.1,ADDITION:6.2,BITWISE_SHIFT:7,RELATIONAL:8,IN:8,INSTANCEOF:8,EQUALITY:9,BITWISE_AND:10,BITWISE_XOR:11,BITWISE_OR:12,LOGICAL_AND:13,LOGICAL_OR:14,CONDITIONAL:15,ASSIGNMENT:16,YIELD:17,COMMA:18,NONE:99},e=class extends N.CodeGenerator$$module$build$src$core$generator{constructor(e){super(null!=e?e:"JavaScript"),this.ORDER_OVERRIDES=[[E.FUNCTION_CALL,E.MEMBER],[E.FUNCTION_CALL,E.FUNCTION_CALL],[E.MEMBER,E.MEMBER],[E.MEMBER,E.FUNCTION_CALL],[E.LOGICAL_NOT,E.LOGICAL_NOT],[E.MULTIPLICATION,E.MULTIPLICATION],[E.ADDITION,E.ADDITION],[E.LOGICAL_AND,E.LOGICAL_AND],[E.LOGICAL_OR,E.LOGICAL_OR]],this.isInitialized=!1;for(const t in E)this["ORDER_"+t]=E[t];this.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(","))}init(e){super.init(e),this.nameDB_?this.nameDB_.reset():this.nameDB_=new N.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(e.getVariableMap()),this.nameDB_.populateVariables(e),this.nameDB_.populateProcedures(e);var t=[],n=N.allDeveloperVariables$$module$build$src$core$variables(e);for(let e=0;e<n.length;e++)t.push(this.nameDB_.getName(n[e],N.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(e=N.allUsedVarModels$$module$build$src$core$variables(e),n=0;n<e.length;n++)t.push(this.nameDB_.getName(e[n].getId(),N.NameType$$module$build$src$core$names.VARIABLE));t.length&&(this.definitions_.variables="var "+t.join(", ")+";"),this.isInitialized=!0}finish(e){var t=Object.values(this.definitions_);return super.finish(e),this.isInitialized=!1,this.nameDB_.reset(),t.join("\n\n")+"\n\n\n"+e}scrubNakedValue(e){return e+";\n"}quote_(e){return"'"+(e=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"}multiline_quote_(e){return e.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")}scrub_(t,e,n){let r="";if(!t.outputConnection||!t.outputConnection.targetConnection){var a=t.getCommentText();a&&(a=N.wrap$$module$build$src$core$utils$string(a,this.COMMENT_WRAP-3),r+=this.prefixLines(a+"\n","// "));for(let e=0;e<t.inputList.length;e++)t.inputList[e].type===N.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(a=(a=t.inputList[e].connection.targetBlock())&&this.allNestedComments(a))&&(r+=this.prefixLines(a,"// "))}return t=t.nextConnection&&t.nextConnection.targetBlock(),n=n?"":this.blockToCode(t),r+e+n}getAdjusted(e,t,n,r,a){n=n||0,a=a||this.ORDER_NONE,e.workspace.options.oneBasedIndex&&n--;var o=e.workspace.options.oneBasedIndex?"1":"0";let i,u=a;return 0<n?i=u=this.ORDER_ADDITION:n<0?i=u=this.ORDER_SUBTRACTION:r&&(i=u=this.ORDER_UNARY_NEGATION),e=this.valueToCode(e,t,u)||o,N.isNumber$$module$build$src$core$utils$string(e)?(e=Number(e)+n,r&&(e=-e)):(0<n?e=e+" + "+n:n<0&&(e=e+" - "+-n),r&&(e=n?"-("+e+")":"-"+e),i=Math.floor(i),a=Math.floor(a),i&&a>=i&&(e="("+e+")")),e}},c={},d=(c.colour_blend=function(e,t){var n=t.valueToCode(e,"COLOUR1",E.NONE)||"'#000000'",r=t.valueToCode(e,"COLOUR2",E.NONE)||"'#000000'";return e=t.valueToCode(e,"RATIO",E.NONE)||.5,[t.provideFunction_("colourBlend",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {
  ratio = Math.max(Math.min(Number(ratio), 1), 0);
  var r1 = parseInt(c1.substring(1, 3), 16);
  var g1 = parseInt(c1.substring(3, 5), 16);
  var b1 = parseInt(c1.substring(5, 7), 16);
  var r2 = parseInt(c2.substring(1, 3), 16);
  var g2 = parseInt(c2.substring(3, 5), 16);
  var b2 = parseInt(c2.substring(5, 7), 16);
  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);
  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);
  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);
  r = ('0' + (r || 0).toString(16)).slice(-2);
  g = ('0' + (g || 0).toString(16)).slice(-2);
  b = ('0' + (b || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+n+", "+r+", "+e+")",E.FUNCTION_CALL]},c.colour_picker=function(e,t){return[t.quote_(e.getFieldValue("COLOUR")),E.ATOMIC]},c.colour_random=function(e,t){return[t.provideFunction_("colourRandom",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}() {
  var num = Math.floor(Math.random() * Math.pow(2, 24));
  return '#' + ('00000' + num.toString(16)).substr(-6);
}
`)+"()",E.FUNCTION_CALL]},c.colour_rgb=function(e,t){var n=t.valueToCode(e,"RED",E.NONE)||0,r=t.valueToCode(e,"GREEN",E.NONE)||0;return e=t.valueToCode(e,"BLUE",E.NONE)||0,[t.provideFunction_("colourRgb",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {
  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;
  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;
  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;
  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);
  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);
  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+n+", "+r+", "+e+")",E.FUNCTION_CALL]},{lists_create_empty:function(e,t){return["[]",E.ATOMIC]},lists_create_with:function(t,n){var r=Array(t.itemCount_);for(let e=0;e<t.itemCount_;e++)r[e]=n.valueToCode(t,"ADD"+e,E.NONE)||"null";return["["+r.join(", ")+"]",E.ATOMIC]},lists_getIndex:function(e,t){var n=e.getFieldValue("MODE")||"GET",r=e.getFieldValue("WHERE")||"FROM_START",a=t.valueToCode(e,"VALUE","RANDOM"===r?E.NONE:E.MEMBER)||"[]";switch(r){case"FIRST":if("GET"===n)return[a+"[0]",E.MEMBER];if("GET_REMOVE"===n)return[a+".shift()",E.MEMBER];if("REMOVE"===n)return a+".shift();\n";break;case"LAST":if("GET"===n)return[a+".slice(-1)[0]",E.MEMBER];if("GET_REMOVE"===n)return[a+".pop()",E.MEMBER];if("REMOVE"===n)return a+".pop();\n";break;case"FROM_START":if(e=t.getAdjusted(e,"AT"),"GET"===n)return[a+"["+e+"]",E.MEMBER];if("GET_REMOVE"===n)return[a+".splice("+e+", 1)[0]",E.FUNCTION_CALL];if("REMOVE"===n)return a+".splice("+e+", 1);\n";break;case"FROM_END":if(e=t.getAdjusted(e,"AT",1,!0),"GET"===n)return[a+".slice("+e+")[0]",E.FUNCTION_CALL];if("GET_REMOVE"===n)return[a+".splice("+e+", 1)[0]",E.FUNCTION_CALL];if("REMOVE"===n)return a+".splice("+e+", 1);";break;case"RANDOM":if(a=t.provideFunction_("listsGetRandomItem",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+a+", "+("GET"!==n)+")","GET"===n||"GET_REMOVE"===n)return[a,E.FUNCTION_CALL];if("REMOVE"===n)return a+";\n"}throw Error("Unhandled combination (lists_getIndex).")},lists_getSublist:function(e,t){var n=t.valueToCode(e,"LIST",E.MEMBER)||"[]",r=e.getFieldValue("WHERE1"),a=e.getFieldValue("WHERE2");if("FIRST"===r&&"LAST"===a)n+=".slice(0)";else if(n.match(/^\w+$/)||"FROM_END"!==r&&"FROM_START"===a){switch(r){case"FROM_START":r=t.getAdjusted(e,"AT1");break;case"FROM_END":r=n+".length - "+(r=t.getAdjusted(e,"AT1",1,!1,E.SUBTRACTION));break;case"FIRST":r="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(a){case"FROM_START":t=t.getAdjusted(e,"AT2",1);break;case"FROM_END":t=n+".length - "+(t=t.getAdjusted(e,"AT2",0,!1,E.SUBTRACTION));break;case"LAST":t=n+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}n=n+".slice("+r+", "+t+")"}else var o=t.getAdjusted(e,"AT1"),i=(e=t.getAdjusted(e,"AT2"),{FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"}),n=t.provideFunction_("subsequence"+i[r]+i[a],`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(sequence${"FROM_END"===r||"FROM_START"===r?", at1":""}${"FROM_END"===a||"FROM_START"===a?", at2":""}) {
  var start = ${l("sequence",r,"at1")};
  var end = ${l("sequence",a,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+n+("FROM_END"===r||"FROM_START"===r?", "+o:"")+("FROM_END"===a||"FROM_START"===a?", "+e:"")+")";return[n,E.FUNCTION_CALL]},lists_indexOf:function(e,t){var n="FIRST"===e.getFieldValue("END")?"indexOf":"lastIndexOf",r=t.valueToCode(e,"FIND",E.NONE)||"''";return t=(t.valueToCode(e,"VALUE",E.MEMBER)||"[]")+"."+n+"("+r+")",e.workspace.options.oneBasedIndex?[t+" + 1",E.ADDITION]:[t,E.FUNCTION_CALL]},lists_isEmpty:function(e,t){return["!"+(t.valueToCode(e,"VALUE",E.MEMBER)||"[]")+".length",E.LOGICAL_NOT]},lists_length:function(e,t){return[(t.valueToCode(e,"VALUE",E.MEMBER)||"[]")+".length",E.MEMBER]},lists_repeat:function(e,t){return[t.provideFunction_("listsRepeat",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`)+"("+(t.valueToCode(e,"ITEM",E.NONE)||"null")+", "+(e=t.valueToCode(e,"NUM",E.NONE)||"0")+")",E.FUNCTION_CALL]},lists_reverse:function(e,t){return[(t.valueToCode(e,"LIST",E.FUNCTION_CALL)||"[]")+".slice().reverse()",E.FUNCTION_CALL]},lists_setIndex:function(e,n){function t(){var e,t;return r.match(/^\w+$/)?"":(t="var "+(e=n.nameDB_.getDistinctName("tmpList",N.NameType$$module$build$src$core$names.VARIABLE))+" = "+r+";\n",r=e,t)}let r=n.valueToCode(e,"LIST",E.MEMBER)||"[]";var a=e.getFieldValue("MODE")||"GET",o=e.getFieldValue("WHERE")||"FROM_START",i=n.valueToCode(e,"TO",E.ASSIGNMENT)||"null";switch(o){case"FIRST":if("SET"===a)return r+"[0] = "+i+";\n";if("INSERT"===a)return r+".unshift("+i+");\n";break;case"LAST":if("SET"===a)return t()+(r+"["+r)+".length - 1] = "+i+";\n";if("INSERT"===a)return r+".push("+i+");\n";break;case"FROM_START":if(e=n.getAdjusted(e,"AT"),"SET"===a)return r+"["+e+"] = "+i+";\n";if("INSERT"===a)return r+".splice("+e+", 0, "+i+");\n";break;case"FROM_END":if(e=n.getAdjusted(e,"AT",1,!1,E.SUBTRACTION),o=t(),"SET"===a)return o+(r+"["+r)+".length - "+e+"] = "+i+";\n";if("INSERT"===a)return o+(r+".splice("+r)+".length - "+e+", 0, "+i+");\n";break;case"RANDOM":if(e=t(),e+="var "+(o=n.nameDB_.getDistinctName("tmpX",N.NameType$$module$build$src$core$names.VARIABLE))+" = Math.floor(Math.random() * "+r+".length);\n","SET"===a)return e+(r+"[")+o+"] = "+i+";\n";if("INSERT"===a)return e+(r+".splice(")+o+", 0, "+i+");\n"}throw Error("Unhandled combination (lists_setIndex).")},lists_sort:function(e,t){var n=t.valueToCode(e,"LIST",E.FUNCTION_CALL)||"[]",r="1"===e.getFieldValue("DIRECTION")?1:-1;return e=e.getFieldValue("TYPE"),[n+".slice().sort("+(t=t.provideFunction_("listsGetSortCompare",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return String(a) > String(b) ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return String(a).toLowerCase() > String(b).toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `))+'("'+e+'", '+r+"))",E.FUNCTION_CALL]},lists_split:function(e,t){let n=t.valueToCode(e,"INPUT",E.MEMBER);if(t=t.valueToCode(e,"DELIM",E.NONE)||"''","SPLIT"===(e=e.getFieldValue("MODE")))n=n||"''",e="split";else{if("JOIN"!==e)throw Error("Unknown mode: "+e);n=n||"[]",e="join"}return[n+"."+e+"("+t+")",E.FUNCTION_CALL]}}),O={},I=(O.controls_if=t,O.controls_ifelse=t,O.logic_boolean=function(e,t){return["TRUE"===e.getFieldValue("BOOL")?"true":"false",E.ATOMIC]},O.logic_compare=function(e,t){var n={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[e.getFieldValue("OP")],r="=="===n||"!="===n?E.EQUALITY:E.RELATIONAL;return[(t.valueToCode(e,"A",r)||"0")+" "+n+" "+(e=t.valueToCode(e,"B",r)||"0"),r]},O.logic_negate=function(e,t){var n=E.LOGICAL_NOT;return["!"+(t.valueToCode(e,"BOOL",n)||"true"),n]},O.logic_null=function(e,t){return["null",E.ATOMIC]},O.logic_operation=function(e,t){var n="AND"===e.getFieldValue("OP")?"&&":"||",r="&&"==n?E.LOGICAL_AND:E.LOGICAL_OR;let a=t.valueToCode(e,"A",r);return e=t.valueToCode(e,"B",r),e=a||e?(t="&&"==n?"true":"false",a=a||t,e||t):a="false",[a+" "+n+" "+e,r]},O.logic_ternary=function(e,t){return[(t.valueToCode(e,"IF",E.CONDITIONAL)||"false")+" ? "+(t.valueToCode(e,"THEN",E.CONDITIONAL)||"null")+" : "+(e=t.valueToCode(e,"ELSE",E.CONDITIONAL)||"null"),E.CONDITIONAL]},{controls_flow_statements:function(e,t){let n="";var r;switch(t.STATEMENT_PREFIX&&(n+=t.injectId(t.STATEMENT_PREFIX,e)),t.STATEMENT_SUFFIX&&(n+=t.injectId(t.STATEMENT_SUFFIX,e)),t.STATEMENT_PREFIX&&(r=e.getSurroundLoop())&&!r.suppressPrefixSuffix&&(n+=t.injectId(t.STATEMENT_PREFIX,r)),e.getFieldValue("FLOW")){case"BREAK":return n+"break;\n";case"CONTINUE":return n+"continue;\n"}throw Error("Unknown flow statement.")},controls_for:function(t,n){var r=n.nameDB_.getName(t.getFieldValue("VAR"),N.NameType$$module$build$src$core$names.VARIABLE),a=n.valueToCode(t,"FROM",E.ASSIGNMENT)||"0",o=n.valueToCode(t,"TO",E.ASSIGNMENT)||"0",i=n.valueToCode(t,"BY",E.ASSIGNMENT)||"1",u=n.statementToCode(t,"DO"),u=n.addLoopTrap(u,t);if(N.isNumber$$module$build$src$core$utils$string(a)&&N.isNumber$$module$build$src$core$utils$string(o)&&N.isNumber$$module$build$src$core$utils$string(i))t="for ("+r+" = "+a+"; "+r+((n=Number(a)<=Number(o))?" <= ":" >= ")+o+"; "+r,t=1===(r=Math.abs(Number(i)))?t+(n?"++":"--"):t+(n?" += ":" -= ")+r,t+=") {\n"+u+"}\n";else{t="";let e=a;a.match(/^\w+$/)||N.isNumber$$module$build$src$core$utils$string(a)||(t+="var "+(e=n.nameDB_.getDistinctName(r+"_start",N.NameType$$module$build$src$core$names.VARIABLE))+" = "+a+";\n"),(a=o).match(/^\w+$/)||N.isNumber$$module$build$src$core$utils$string(o)||(t+="var "+(a=n.nameDB_.getDistinctName(r+"_end",N.NameType$$module$build$src$core$names.VARIABLE))+" = "+o+";\n"),t+="var "+(o=n.nameDB_.getDistinctName(r+"_inc",N.NameType$$module$build$src$core$names.VARIABLE))+" = ",t=N.isNumber$$module$build$src$core$utils$string(i)?t+(Math.abs(i)+";\n"):t+"Math.abs("+i+");\n",t=(t=(t+="if ("+e+" > "+a+") {\n")+(n.INDENT+o+" = -"+o+";\n"))+"}\nfor ("+r+" = "+e+"; "+o+" >= 0 ? "+r+" <= "+a+" : "+r+" >= "+a+"; "+r+" += "+o+") {\n"+u+"}\n"}return t},controls_forEach:function(e,t){var n=t.nameDB_.getName(e.getFieldValue("VAR"),N.NameType$$module$build$src$core$names.VARIABLE),r=t.valueToCode(e,"LIST",E.ASSIGNMENT)||"[]",a=t.statementToCode(e,"DO"),a=t.addLoopTrap(a,e);e="";let o=r;return r.match(/^\w+$/)||(e+="var "+(o=t.nameDB_.getDistinctName(n+"_list",N.NameType$$module$build$src$core$names.VARIABLE))+" = "+r+";\n"),r=t.nameDB_.getDistinctName(n+"_index",N.NameType$$module$build$src$core$names.VARIABLE),a=t.INDENT+n+" = "+o+"["+r+"];\n"+a,e+("for (var "+r+" in "+o)+") {\n"+a+"}\n"}}),_=(I.controls_repeat=n,I.controls_repeat_ext=n,I.controls_whileUntil=function(e,t){var n="UNTIL"===e.getFieldValue("MODE");let r=t.valueToCode(e,"BOOL",n?E.LOGICAL_NOT:E.NONE)||"false",a=t.statementToCode(e,"DO");return a=t.addLoopTrap(a,e),"while ("+(r=n?"!"+r:r)+") {\n"+a+"}\n"},{math_arithmetic:function(e,t){var n=(r={ADD:[" + ",E.ADDITION],MINUS:[" - ",E.SUBTRACTION],MULTIPLY:[" * ",E.MULTIPLICATION],DIVIDE:[" / ",E.DIVISION],POWER:[null,E.NONE]}[e.getFieldValue("OP")])[0],r=r[1],a=t.valueToCode(e,"A",r)||"0";return e=t.valueToCode(e,"B",r)||"0",n?[a+n+e,r]:["Math.pow("+a+", "+e+")",E.FUNCTION_CALL]},math_atan2:function(e,t){var n=t.valueToCode(e,"X",E.NONE)||"0";return["Math.atan2("+(t.valueToCode(e,"Y",E.NONE)||"0")+", "+n+") / Math.PI * 180",E.DIVISION]},math_change:function(e,t){var n=t.valueToCode(e,"DELTA",E.ADDITION)||"0";return(e=t.nameDB_.getName(e.getFieldValue("VAR"),N.NameType$$module$build$src$core$names.VARIABLE))+" = (typeof "+e+" === 'number' ? "+e+" : 0) + "+n+";\n"},math_constant:function(e,t){return{PI:["Math.PI",E.MEMBER],E:["Math.E",E.MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",E.DIVISION],SQRT2:["Math.SQRT2",E.MEMBER],SQRT1_2:["Math.SQRT1_2",E.MEMBER],INFINITY:["Infinity",E.ATOMIC]}[e.getFieldValue("CONSTANT")]},math_constrain:function(e,t){return["Math.min(Math.max("+(t.valueToCode(e,"VALUE",E.NONE)||"0")+", "+(t.valueToCode(e,"LOW",E.NONE)||"0")+"), "+(e=t.valueToCode(e,"HIGH",E.NONE)||"Infinity")+")",E.FUNCTION_CALL]},math_modulo:function(e,t){return[(t.valueToCode(e,"DIVIDEND",E.MODULUS)||"0")+" % "+(e=t.valueToCode(e,"DIVISOR",E.MODULUS)||"0"),E.MODULUS]},math_number:function(e,t){return[e=Number(e.getFieldValue("NUM")),0<=e?E.ATOMIC:E.UNARY_NEGATION]},math_number_property:function(e,t){var n={EVEN:[" % 2 === 0",E.MODULUS,E.EQUALITY],ODD:[" % 2 === 1",E.MODULUS,E.EQUALITY],WHOLE:[" % 1 === 0",E.MODULUS,E.EQUALITY],POSITIVE:[" > 0",E.RELATIONAL,E.RELATIONAL],NEGATIVE:[" < 0",E.RELATIONAL,E.RELATIONAL],DIVISIBLE_BY:[null,E.MODULUS,E.EQUALITY],PRIME:[null,E.NONE,E.FUNCTION_CALL]},r=e.getFieldValue("PROPERTY"),[a,o,i]=n[r],n=t.valueToCode(e,"NUMBER_TO_CHECK",o)||"0";return[e="PRIME"===r?t.provideFunction_("mathIsPrime",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+n+")":"DIVISIBLE_BY"===r?n+" % "+(e=t.valueToCode(e,"DIVISOR",E.MODULUS)||"0")+" === 0":n+a,i]},math_on_list:function(e,t){var n=e.getFieldValue("OP");switch(n){case"SUM":e=t.valueToCode(e,"LIST",E.MEMBER)||"[]",e+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":e="Math.min.apply(null, "+(e=t.valueToCode(e,"LIST",E.NONE)||"[]")+")";break;case"MAX":e="Math.max.apply(null, "+(e=t.valueToCode(e,"LIST",E.NONE)||"[]")+")";break;case"AVERAGE":e=(n=t.provideFunction_("mathMean",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`))+"("+(e=t.valueToCode(e,"LIST",E.NONE)||"[]")+")";break;case"MEDIAN":e=(n=t.provideFunction_("mathMedian",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`))+"("+(e=t.valueToCode(e,"LIST",E.NONE)||"[]")+")";break;case"MODE":e=(n=t.provideFunction_("mathModes",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
        modes.push(counts[j][0]);
    }
  }
  return modes;
}
`))+"("+(e=t.valueToCode(e,"LIST",E.NONE)||"[]")+")";break;case"STD_DEV":e=(n=t.provideFunction_("mathStandardDeviation",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance = variance / n;
  return Math.sqrt(variance);
}
`))+"("+(e=t.valueToCode(e,"LIST",E.NONE)||"[]")+")";break;case"RANDOM":e=(n=t.provideFunction_("mathRandomList",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`))+"("+(e=t.valueToCode(e,"LIST",E.NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+n)}return[e,E.FUNCTION_CALL]},math_random_float:function(e,t){return["Math.random()",E.FUNCTION_CALL]},math_random_int:function(e,t){var n=t.valueToCode(e,"FROM",E.NONE)||"0";return e=t.valueToCode(e,"TO",E.NONE)||"0",[t.provideFunction_("mathRandomInt",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+n+", "+e+")",E.FUNCTION_CALL]}}),A=(_.math_round=r,_.math_single=r,_.math_trig=r,{procedures_callnoreturn:function(e,t){return t.forBlock.procedures_callreturn(e,t)[0]+";\n"},procedures_callreturn:function(t,n){var e=n.nameDB_.getName(t.getFieldValue("NAME"),N.NameType$$module$build$src$core$names.PROCEDURE),r=[],a=t.getVars();for(let e=0;e<a.length;e++)r[e]=n.valueToCode(t,"ARG"+e,E.NONE)||"null";return[e+"("+r.join(", ")+")",E.FUNCTION_CALL]}}),L=(A.procedures_defnoreturn=a,A.procedures_defreturn=a,A.procedures_ifreturn=function(e,t){let n="if ("+(t.valueToCode(e,"CONDITION",E.NONE)||"false")+") {\n";return t.STATEMENT_SUFFIX&&(n+=t.prefixLines(t.injectId(t.STATEMENT_SUFFIX,e),t.INDENT)),e.hasReturnValue_?(e=t.valueToCode(e,"VALUE",E.NONE)||"null",n+=t.INDENT+"return "+e+";\n"):n+=t.INDENT+"return;\n",n+"}\n"},/^\s*'([^']|\\')*'\s*$/),C={text:function(e,t){return[t.quote_(e.getFieldValue("TEXT")),E.ATOMIC]},text_append:function(e,t){var n=t.nameDB_.getName(e.getFieldValue("VAR"),N.NameType$$module$build$src$core$names.VARIABLE);return e=t.valueToCode(e,"TEXT",E.NONE)||"''",n+" += "+s(e)[0]+";\n"},text_changeCase:function(e,t){var n={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[e.getFieldValue("CASE")];return e=t.valueToCode(e,"TEXT",n?E.MEMBER:E.NONE)||"''",[n?e+n:t.provideFunction_("textToTitleCase",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+e+")",E.FUNCTION_CALL]},text_charAt:function(e,t){var n=e.getFieldValue("WHERE")||"FROM_START",r=t.valueToCode(e,"VALUE","RANDOM"===n?E.NONE:E.MEMBER)||"''";switch(n){case"FIRST":return[r+".charAt(0)",E.FUNCTION_CALL];case"LAST":return[r+".slice(-1)",E.FUNCTION_CALL];case"FROM_START":return[r+".charAt("+(e=t.getAdjusted(e,"AT"))+")",E.FUNCTION_CALL];case"FROM_END":return[r+".slice("+(e=t.getAdjusted(e,"AT",1,!0))+").charAt(0)",E.FUNCTION_CALL];case"RANDOM":return[t.provideFunction_("textRandomLetter",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+r+")",E.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},text_count:function(e,t){var n=t.valueToCode(e,"TEXT",E.NONE)||"''";return e=t.valueToCode(e,"SUB",E.NONE)||"''",[t.provideFunction_("textCount",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+n+", "+e+")",E.FUNCTION_CALL]},text_getSubstring:function(e,t){var n=e.getFieldValue("WHERE1"),r=e.getFieldValue("WHERE2"),a="FROM_END"!==n&&"LAST"!==n&&"FROM_END"!==r&&"LAST"!==r,o=t.valueToCode(e,"STRING",a?E.MEMBER:E.NONE)||"''";if("FIRST"===n&&"LAST"===r)return[o,E.NONE];if(o.match(/^'?\w+'?$/)||a){switch(n){case"FROM_START":n=t.getAdjusted(e,"AT1");break;case"FROM_END":n=o+".length - "+(n=t.getAdjusted(e,"AT1",1,!1,E.SUBTRACTION));break;case"FIRST":n="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(r){case"FROM_START":t=t.getAdjusted(e,"AT2",1);break;case"FROM_END":t=o+".length - "+(t=t.getAdjusted(e,"AT2",0,!1,E.SUBTRACTION));break;case"LAST":t=o+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}o=o+".slice("+n+", "+t+")"}else{a=t.getAdjusted(e,"AT1"),e=t.getAdjusted(e,"AT2");var i={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},o=t.provideFunction_("subsequence"+i[n]+i[r],`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(sequence${"FROM_END"===n||"FROM_START"===n?", at1":""}${"FROM_END"===r||"FROM_START"===r?", at2":""}) {
  var start = ${T("sequence",n,"at1")};
  var end = ${T("sequence",r,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+o+("FROM_END"===n||"FROM_START"===n?", "+a:"")+("FROM_END"===r||"FROM_START"===r?", "+e:"")+")"}return[o,E.FUNCTION_CALL]},text_indexOf:function(e,t){var n="FIRST"===e.getFieldValue("END")?"indexOf":"lastIndexOf",r=t.valueToCode(e,"FIND",E.NONE)||"''";return t=(t.valueToCode(e,"VALUE",E.MEMBER)||"''")+"."+n+"("+r+")",e.workspace.options.oneBasedIndex?[t+" + 1",E.ADDITION]:[t,E.FUNCTION_CALL]},text_isEmpty:function(e,t){return["!"+(t.valueToCode(e,"VALUE",E.MEMBER)||"''")+".length",E.LOGICAL_NOT]},text_join:function(t,n){switch(t.itemCount_){case 0:return["''",E.ATOMIC];case 1:return t=n.valueToCode(t,"ADD0",E.NONE)||"''",s(t);case 2:var r=n.valueToCode(t,"ADD0",E.NONE)||"''";return t=n.valueToCode(t,"ADD1",E.NONE)||"''",[s(r)[0]+" + "+s(t)[0],E.ADDITION];default:r=Array(t.itemCount_);for(let e=0;e<t.itemCount_;e++)r[e]=n.valueToCode(t,"ADD"+e,E.NONE)||"''";return["["+r.join(",")+"].join('')",E.FUNCTION_CALL]}},text_length:function(e,t){return[(t.valueToCode(e,"VALUE",E.MEMBER)||"''")+".length",E.MEMBER]},text_multiline:function(e,t){return t=-1!==(e=t.multiline_quote_(e.getFieldValue("TEXT"))).indexOf("+")?E.ADDITION:E.ATOMIC,[e,t]},text_print:function(e,t){return"window.alert("+(t.valueToCode(e,"TEXT",E.NONE)||"''")+");\n"}},M=(C.text_prompt=o,C.text_prompt_ext=o,C.text_replace=function(e,t){var n=t.valueToCode(e,"TEXT",E.NONE)||"''",r=t.valueToCode(e,"FROM",E.NONE)||"''";return e=t.valueToCode(e,"TO",E.NONE)||"''",[t.provideFunction_("textReplace",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+n+", "+r+", "+e+")",E.FUNCTION_CALL]},C.text_reverse=function(e,t){return[(t.valueToCode(e,"TEXT",E.MEMBER)||"''")+".split('').reverse().join('')",E.FUNCTION_CALL]},C.text_trim=function(e,t){var n={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[e.getFieldValue("MODE")];return[(t.valueToCode(e,"TEXT",E.MEMBER)||"''")+n,E.FUNCTION_CALL]},{}),m=(M.variables_get=i,M.variables_set=u,{}),R=(m.variables_get_dynamic=i,m.variables_set_dynamic=u,new e),c=(Object.assign(R.forBlock,c,d,O,I,_,A,C,M,m),{});return c.JavascriptGenerator=e,c.Order=E,c.javascriptGenerator=R,c.__namespace__=N,c});